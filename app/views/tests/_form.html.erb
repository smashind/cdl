<% content_for :head do %>
  <style>
  .nested_test_questions_0_choices:nth-of-type(5) {
    display: none;
  }
  </style>
<% end %>

<%= form_for(@test) do |f| %>
  <% if @test.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@test.errors.count, "error") %> prohibited this test from being saved:</h2>

      <ul>
      <% @test.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br>
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.nested_fields_for :questions do |q| %>
      <p><%= q.label :text, "Question" %>      
      <%= q.text_field :text %></p>
      <% 4.times { q.object.send(:choices).build } %>
      <%= q.nested_fields_for :choices do |c| %>
        <p class="choices"><%= c.label :answer, "Answer" %>      
        <%= c.text_field :answer %>
        <%= c.label :is_correct %>
        <%= c.check_box :is_correct %></p>
      <% end %>
    <% end %>
    <%= f.add_nested_fields_link :questions %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>